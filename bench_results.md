# Full benchmark results

The following table compares `turboselect::select_nth_unstable` with `core::slice::select_nth_unstable` as the baseline. The runs were randomly interleaved, i.e. either `turboselect` or `core` was chosen randomly for each run. Throughput was calculated as millions of elements per second, i.e `data.len() * runs / seconds`. Data preparation was ignored in the timing.

The input patterns are:
- `random_u32`: pseudorandom `u32`s
- `sorted_u32`: presorted `u32`s with randomized ranges
- `mostlysort_u32`: `u32`s with approximately 90% of the elements in sorted order.
- `sawtooth_u32`: `u32`s with a sawtooth pattern, i.e `0, 1, 2, ..., 0, 1, 2, ...`. The length of the sawtooth is randomized.
- `reversed_u32`: `u32`s in reverse order, with randomized ranges
- `randomdup_u32`: pseudorandom `u32`s sampled from the range `0..sqrt(data.len())`.
- `random_bool`: pseudorandom `bool`s

The benchmarks were run on a Ryzen 5800H

## Results

| data type          | slice length | index       | throughput, M el/s   | baseline, M el /s  | ratio |
| ------------------ | ------------ | ----------- | -------------------- | ------------------ | ----- |
| random_u32         | 1000         | 1           | 1531.950             | 688.425            | 2.225 |
| random_u32         | 1000         | 10          | 1337.704             | 671.617            | 1.992 |
| random_u32         | 1000         | 50          | 998.416              | 634.128            | 1.574 |
| random_u32         | 1000         | 250         | 749.695              | 600.885            | 1.248 |
| random_u32         | 1000         | 500         | 732.327              | 577.630            | 1.268 |
| random_u32         | 10000        | 10          | 2426.299             | 972.833            | 2.494 |
| random_u32         | 10000        | 100         | 1957.348             | 970.217            | 2.017 |
| random_u32         | 10000        | 500         | 1482.766             | 922.714            | 1.607 |
| random_u32         | 10000        | 2500        | 1129.177             | 848.356            | 1.331 |
| random_u32         | 10000        | 5000        | 1030.206             | 796.879            | 1.293 |
| random_u32         | 100000       | 100         | 2760.916             | 1028.961           | 2.683 |
| random_u32         | 100000       | 1000        | 2378.758             | 1025.502           | 2.320 |
| random_u32         | 100000       | 5000        | 1850.204             | 985.648            | 1.877 |
| random_u32         | 100000       | 25000       | 1330.636             | 879.666            | 1.513 |
| random_u32         | 100000       | 50000       | 1226.131             | 837.307            | 1.464 |
| random_u32         | 1000000      | 1000        | 2784.227             | 1007.112           | 2.765 |
| random_u32         | 1000000      | 10000       | 2643.935             | 1035.969           | 2.552 |
| random_u32         | 1000000      | 50000       | 2077.787             | 985.759            | 2.108 |
| random_u32         | 1000000      | 250000      | 1514.217             | 894.218            | 1.693 |
| random_u32         | 1000000      | 500000      | 1348.236             | 849.208            | 1.588 |
| random_u32         | 10000000     | 10000       | 2624.036             | 991.049            | 2.648 |
| random_u32         | 10000000     | 100000      | 2549.035             | 989.618            | 2.576 |
| random_u32         | 10000000     | 500000      | 2170.388             | 990.302            | 2.192 |
| random_u32         | 10000000     | 2500000     | 1552.740             | 890.071            | 1.745 |
| random_u32         | 10000000     | 5000000     | 1352.183             | 822.061            | 1.645 |
| random_u32         | 100000000    | 100000      | 3133.058             | 982.153            | 3.190 |
| random_u32         | 100000000    | 1000000     | 2450.124             | 1007.437           | 2.432 |
| random_u32         | 100000000    | 5000000     | 1877.348             | 957.386            | 1.961 |
| random_u32         | 100000000    | 25000000    | 1482.018             | 881.192            | 1.682 |
| random_u32         | 100000000    | 50000000    | 1412.512             | 807.921            | 1.748 |
| sorted_u32         | 1000         | 1           | 6996.084             | 1101.909           | 6.349 |
| sorted_u32         | 1000         | 10          | 7137.572             | 1091.105           | 6.542 |
| sorted_u32         | 1000         | 50          | 7050.023             | 1084.222           | 6.502 |
| sorted_u32         | 1000         | 250         | 7004.039             | 1313.945           | 5.331 |
| sorted_u32         | 1000         | 500         | 7163.535             | 1868.118           | 3.835 |
| sorted_u32         | 10000        | 10          | 8007.136             | 1302.303           | 6.148 |
| sorted_u32         | 10000        | 100         | 8053.769             | 1316.665           | 6.117 |
| sorted_u32         | 10000        | 500         | 7961.319             | 1322.350           | 6.021 |
| sorted_u32         | 10000        | 2500        | 7671.058             | 1375.354           | 5.578 |
| sorted_u32         | 10000        | 5000        | 8043.101             | 2156.638           | 3.729 |
| sorted_u32         | 100000       | 100         | 3637.226             | 1205.619           | 3.017 |
| sorted_u32         | 100000       | 1000        | 3503.172             | 1201.882           | 2.915 |
| sorted_u32         | 100000       | 5000        | 3205.931             | 1177.672           | 2.722 |
| sorted_u32         | 100000       | 25000       | 2679.011             | 1254.287           | 2.136 |
| sorted_u32         | 100000       | 50000       | 2235.486             | 1444.418           | 1.548 |
| sorted_u32         | 1000000      | 1000        | 3158.028             | 1162.104           | 2.718 |
| sorted_u32         | 1000000      | 10000       | 2997.620             | 1154.573           | 2.596 |
| sorted_u32         | 1000000      | 50000       | 2606.506             | 1066.916           | 2.443 |
| sorted_u32         | 1000000      | 250000      | 1918.059             | 943.091            | 2.034 |
| sorted_u32         | 1000000      | 500000      | 1638.324             | 914.980            | 1.791 |
| sorted_u32         | 10000000     | 10000       | 2118.721             | 1053.463           | 2.011 |
| sorted_u32         | 10000000     | 100000      | 2097.213             | 1020.276           | 2.056 |
| sorted_u32         | 10000000     | 500000      | 1731.263             | 963.293            | 1.797 |
| sorted_u32         | 10000000     | 2500000     | 1415.152             | 858.206            | 1.649 |
| sorted_u32         | 10000000     | 5000000     | 1346.865             | 792.190            | 1.700 |
| sorted_u32         | 100000000    | 100000      | 1574.529             | 1039.830           | 1.514 |
| sorted_u32         | 100000000    | 1000000     | 1571.064             | 1044.854           | 1.504 |
| sorted_u32         | 100000000    | 5000000     | 1344.859             | 938.346            | 1.433 |
| sorted_u32         | 100000000    | 25000000    | 1285.772             | 810.991            | 1.585 |
| sorted_u32         | 100000000    | 50000000    | 1367.157             | 765.494            | 1.786 |
| mostlysort_u32     | 1000         | 1           | 1572.191             | 866.867            | 1.814 |
| mostlysort_u32     | 1000         | 10          | 1157.285             | 822.032            | 1.408 |
| mostlysort_u32     | 1000         | 50          | 1076.994             | 814.698            | 1.322 |
| mostlysort_u32     | 1000         | 250         | 907.008              | 779.062            | 1.164 |
| mostlysort_u32     | 1000         | 500         | 866.919              | 797.572            | 1.087 |
| mostlysort_u32     | 10000        | 10          | 1682.960             | 1248.613           | 1.348 |
| mostlysort_u32     | 10000        | 100         | 2581.075             | 1264.752           | 2.041 |
| mostlysort_u32     | 10000        | 500         | 1895.138             | 1239.987           | 1.528 |
| mostlysort_u32     | 10000        | 2500        | 1481.794             | 1193.346           | 1.242 |
| mostlysort_u32     | 10000        | 5000        | 1308.578             | 1165.210           | 1.123 |
| mostlysort_u32     | 100000       | 100         | 3071.548             | 1111.042           | 2.765 |
| mostlysort_u32     | 100000       | 1000        | 2900.543             | 1092.813           | 2.654 |
| mostlysort_u32     | 100000       | 5000        | 2518.197             | 1119.176           | 2.250 |
| mostlysort_u32     | 100000       | 25000       | 1765.799             | 1101.106           | 1.604 |
| mostlysort_u32     | 100000       | 50000       | 1530.402             | 1094.174           | 1.399 |
| mostlysort_u32     | 1000000      | 1000        | 3210.076             | 1146.394           | 2.800 |
| mostlysort_u32     | 1000000      | 10000       | 3030.886             | 1093.821           | 2.771 |
| mostlysort_u32     | 1000000      | 50000       | 2591.254             | 1034.216           | 2.506 |
| mostlysort_u32     | 1000000      | 250000      | 1765.633             | 893.108            | 1.977 |
| mostlysort_u32     | 1000000      | 500000      | 1481.345             | 855.738            | 1.731 |
| mostlysort_u32     | 10000000     | 10000       | 1883.295             | 1077.556           | 1.748 |
| mostlysort_u32     | 10000000     | 100000      | 1826.508             | 1021.966           | 1.787 |
| mostlysort_u32     | 10000000     | 500000      | 1696.741             | 1003.258           | 1.691 |
| mostlysort_u32     | 10000000     | 2500000     | 1356.435             | 839.967            | 1.615 |
| mostlysort_u32     | 10000000     | 5000000     | 1189.399             | 798.589            | 1.489 |
| mostlysort_u32     | 100000000    | 100000      | 1555.997             | 1152.545           | 1.350 |
| mostlysort_u32     | 100000000    | 1000000     | 1554.122             | 1074.046           | 1.447 |
| mostlysort_u32     | 100000000    | 5000000     | 1356.096             | 935.460            | 1.450 |
| mostlysort_u32     | 100000000    | 25000000    | 1232.212             | 847.051            | 1.455 |
| mostlysort_u32     | 100000000    | 50000000    | 1361.752             | 796.404            | 1.710 |
| sawtooth_u32       | 1000         | 1           | 1454.652             | 1082.436           | 1.344 |
| sawtooth_u32       | 1000         | 10          | 1487.981             | 1073.872           | 1.386 |
| sawtooth_u32       | 1000         | 50          | 1078.399             | 1002.899           | 1.075 |
| sawtooth_u32       | 1000         | 250         | 637.659              | 901.485            | 0.707 |
| sawtooth_u32       | 1000         | 500         | 815.322              | 950.091            | 0.858 |
| sawtooth_u32       | 10000        | 10          | 1809.982             | 1160.093           | 1.560 |
| sawtooth_u32       | 10000        | 100         | 2068.139             | 1150.095           | 1.798 |
| sawtooth_u32       | 10000        | 500         | 1258.684             | 1019.704           | 1.234 |
| sawtooth_u32       | 10000        | 2500        | 1173.834             | 894.594            | 1.312 |
| sawtooth_u32       | 10000        | 5000        | 1144.257             | 805.207            | 1.421 |
| sawtooth_u32       | 100000       | 100         | 1849.197             | 1077.479           | 1.716 |
| sawtooth_u32       | 100000       | 1000        | 1333.745             | 1035.671           | 1.288 |
| sawtooth_u32       | 100000       | 5000        | 1370.148             | 992.806            | 1.380 |
| sawtooth_u32       | 100000       | 25000       | 1228.523             | 880.414            | 1.395 |
| sawtooth_u32       | 100000       | 50000       | 1166.357             | 827.743            | 1.409 |
| sawtooth_u32       | 1000000      | 1000        | 3093.812             | 1116.661           | 2.771 |
| sawtooth_u32       | 1000000      | 10000       | 2734.554             | 1090.136           | 2.508 |
| sawtooth_u32       | 1000000      | 50000       | 2338.213             | 1024.752           | 2.282 |
| sawtooth_u32       | 1000000      | 250000      | 1656.247             | 867.543            | 1.909 |
| sawtooth_u32       | 1000000      | 500000      | 1448.958             | 816.320            | 1.775 |
| sawtooth_u32       | 10000000     | 10000       | 2323.069             | 1073.053           | 2.165 |
| sawtooth_u32       | 10000000     | 100000      | 2378.146             | 1055.521           | 2.253 |
| sawtooth_u32       | 10000000     | 500000      | 2129.135             | 974.430            | 2.185 |
| sawtooth_u32       | 10000000     | 2500000     | 1577.321             | 862.984            | 1.828 |
| sawtooth_u32       | 10000000     | 5000000     | 1387.312             | 821.469            | 1.689 |
| sawtooth_u32       | 100000000    | 100000      | 3217.226             | 1053.067           | 3.055 |
| sawtooth_u32       | 100000000    | 1000000     | 2811.368             | 1025.448           | 2.742 |
| sawtooth_u32       | 100000000    | 5000000     | 2623.470             | 985.143            | 2.663 |
| sawtooth_u32       | 100000000    | 25000000    | 1895.330             | 849.232            | 2.232 |
| sawtooth_u32       | 100000000    | 50000000    | 1546.292             | 849.617            | 1.820 |
| reversed_u32       | 1000         | 1           | 4666.037             | 957.647            | 4.872 |
| reversed_u32       | 1000         | 10          | 4536.630             | 928.548            | 4.886 |
| reversed_u32       | 1000         | 50          | 4684.365             | 938.086            | 4.994 |
| reversed_u32       | 1000         | 250         | 4724.161             | 945.534            | 4.996 |
| reversed_u32       | 1000         | 500         | 4789.113             | 883.965            | 5.418 |
| reversed_u32       | 10000        | 10          | 4934.429             | 1056.201           | 4.672 |
| reversed_u32       | 10000        | 100         | 4978.484             | 1054.123           | 4.723 |
| reversed_u32       | 10000        | 500         | 5087.160             | 1079.985           | 4.710 |
| reversed_u32       | 10000        | 2500        | 5162.104             | 1093.934           | 4.719 |
| reversed_u32       | 10000        | 5000        | 5132.932             | 1025.267           | 5.006 |
| reversed_u32       | 100000       | 100         | 3575.300             | 1089.835           | 3.281 |
| reversed_u32       | 100000       | 1000        | 3482.079             | 1102.858           | 3.157 |
| reversed_u32       | 100000       | 5000        | 3117.723             | 1076.251           | 2.897 |
| reversed_u32       | 100000       | 25000       | 2502.233             | 1097.809           | 2.279 |
| reversed_u32       | 100000       | 50000       | 2119.627             | 1133.873           | 1.869 |
| reversed_u32       | 1000000      | 1000        | 3285.145             | 1195.005           | 2.749 |
| reversed_u32       | 1000000      | 10000       | 3057.320             | 1192.538           | 2.564 |
| reversed_u32       | 1000000      | 50000       | 2689.237             | 1107.644           | 2.428 |
| reversed_u32       | 1000000      | 250000      | 1909.819             | 947.619            | 2.015 |
| reversed_u32       | 1000000      | 500000      | 1637.509             | 897.852            | 1.824 |
| reversed_u32       | 10000000     | 10000       | 1897.281             | 1059.075           | 1.791 |
| reversed_u32       | 10000000     | 100000      | 1930.985             | 1077.399           | 1.792 |
| reversed_u32       | 10000000     | 500000      | 1610.080             | 996.525            | 1.616 |
| reversed_u32       | 10000000     | 2500000     | 1400.472             | 848.387            | 1.651 |
| reversed_u32       | 10000000     | 5000000     | 1352.169             | 805.215            | 1.679 |
| reversed_u32       | 100000000    | 100000      | 1582.248             | 1080.833           | 1.464 |
| reversed_u32       | 100000000    | 1000000     | 1582.806             | 1073.218           | 1.475 |
| reversed_u32       | 100000000    | 5000000     | 1379.458             | 956.091            | 1.443 |
| reversed_u32       | 100000000    | 25000000    | 1312.579             | 820.798            | 1.599 |
| reversed_u32       | 100000000    | 50000000    | 1397.566             | 760.996            | 1.836 |
| randomdup_u32      | 1000         | 1           | 1387.919             | 787.567            | 1.762 |
| randomdup_u32      | 1000         | 10          | 1312.888             | 797.980            | 1.645 |
| randomdup_u32      | 1000         | 50          | 981.198              | 747.951            | 1.312 |
| randomdup_u32      | 1000         | 250         | 725.266              | 648.617            | 1.118 |
| randomdup_u32      | 1000         | 500         | 756.361              | 628.488            | 1.203 |
| randomdup_u32      | 10000        | 10          | 1842.467             | 1016.634           | 1.812 |
| randomdup_u32      | 10000        | 100         | 1797.364             | 1008.436           | 1.782 |
| randomdup_u32      | 10000        | 500         | 1409.302             | 946.631            | 1.489 |
| randomdup_u32      | 10000        | 2500        | 1127.022             | 882.334            | 1.277 |
| randomdup_u32      | 10000        | 5000        | 1038.382             | 818.491            | 1.269 |
| randomdup_u32      | 100000       | 100         | 2618.968             | 1034.410           | 2.532 |
| randomdup_u32      | 100000       | 1000        | 2160.395             | 1025.011           | 2.108 |
| randomdup_u32      | 100000       | 5000        | 1787.053             | 992.814            | 1.800 |
| randomdup_u32      | 100000       | 25000       | 1337.003             | 904.085            | 1.479 |
| randomdup_u32      | 100000       | 50000       | 1220.632             | 845.292            | 1.444 |
| randomdup_u32      | 1000000      | 1000        | 2692.808             | 1021.972           | 2.635 |
| randomdup_u32      | 1000000      | 10000       | 2528.973             | 1009.859           | 2.504 |
| randomdup_u32      | 1000000      | 50000       | 2020.782             | 988.264            | 2.045 |
| randomdup_u32      | 1000000      | 250000      | 1486.687             | 910.555            | 1.633 |
| randomdup_u32      | 1000000      | 500000      | 1338.364             | 846.409            | 1.581 |
| randomdup_u32      | 10000000     | 10000       | 2546.265             | 1005.397           | 2.533 |
| randomdup_u32      | 10000000     | 100000      | 2477.060             | 998.651            | 2.480 |
| randomdup_u32      | 10000000     | 500000      | 2102.672             | 970.894            | 2.166 |
| randomdup_u32      | 10000000     | 2500000     | 1513.980             | 914.497            | 1.656 |
| randomdup_u32      | 10000000     | 5000000     | 1350.219             | 835.340            | 1.616 |
| randomdup_u32      | 100000000    | 100000      | 3022.690             | 1032.085           | 2.929 |
| randomdup_u32      | 100000000    | 1000000     | 2245.291             | 967.354            | 2.321 |
| randomdup_u32      | 100000000    | 5000000     | 1771.699             | 990.503            | 1.789 |
| randomdup_u32      | 100000000    | 25000000    | 1480.258             | 877.610            | 1.687 |
| randomdup_u32      | 100000000    | 50000000    | 1390.086             | 826.598            | 1.682 |
| random_bool        | 1000         | 1           | 642.899              | 498.298            | 1.290 |
| random_bool        | 1000         | 10          | 633.734              | 493.059            | 1.285 |
| random_bool        | 1000         | 50          | 561.636              | 453.714            | 1.238 |
| random_bool        | 1000         | 250         | 640.276              | 497.364            | 1.287 |
| random_bool        | 1000         | 500         | 685.457              | 503.698            | 1.361 |
| random_bool        | 10000        | 10          | 656.291              | 516.378            | 1.271 |
| random_bool        | 10000        | 100         | 666.886              | 524.718            | 1.271 |
| random_bool        | 10000        | 500         | 657.474              | 517.574            | 1.270 |
| random_bool        | 10000        | 2500        | 665.696              | 519.091            | 1.282 |
| random_bool        | 10000        | 5000        | 740.252              | 519.755            | 1.424 |
| random_bool        | 100000       | 100         | 675.412              | 528.299            | 1.278 |
| random_bool        | 100000       | 1000        | 675.274              | 524.889            | 1.287 |
| random_bool        | 100000       | 5000        | 674.086              | 529.987            | 1.272 |
| random_bool        | 100000       | 25000       | 666.440              | 522.177            | 1.276 |
| random_bool        | 100000       | 50000       | 747.254              | 537.027            | 1.391 |
| random_bool        | 1000000      | 1000        | 669.334              | 529.060            | 1.265 |
| random_bool        | 1000000      | 10000       | 673.398              | 511.637            | 1.316 |
| random_bool        | 1000000      | 50000       | 672.877              | 532.476            | 1.264 |
| random_bool        | 1000000      | 250000      | 674.494              | 525.464            | 1.284 |
| random_bool        | 1000000      | 500000      | 746.928              | 540.808            | 1.381 |
| random_bool        | 10000000     | 10000       | 667.425              | 551.348            | 1.211 |
| random_bool        | 10000000     | 100000      | 667.394              | 544.624            | 1.225 |
| random_bool        | 10000000     | 500000      | 669.730              | 549.780            | 1.218 |
| random_bool        | 10000000     | 2500000     | 668.984              | 518.406            | 1.290 |
| random_bool        | 10000000     | 5000000     | 763.194              | 505.901            | 1.509 |
| random_bool        | 100000000    | 100000      | 666.841              | 552.131            | 1.208 |
| random_bool        | 100000000    | 1000000     | 669.892              | 505.955            | 1.324 |
| random_bool        | 100000000    | 5000000     | 668.161              | 515.607            | 1.296 |
| random_bool        | 100000000    | 25000000    | 667.591              | 539.521            | 1.237 |
| random_bool        | 100000000    | 50000000    | 760.741              | 604.692            | 1.258 |